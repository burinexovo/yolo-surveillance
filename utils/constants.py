import numpy as np

# =========================
# 影片尺寸
# =========================
# TARGET_WIDTH = 1280
# TARGET_HEIGHT = 720
TARGET_WIDTH = 2304
TARGET_HEIGHT = 1296

# =========================
# YOLO 偵測參數
# =========================
YOLO_CONF = 0.4         # 信心閾值（提高以減少誤檢）
YOLO_IOU = 0.45         # NMS IOU 閾值
YOLO_MAX_DET = 10       # 最大偵測數
YOLO_CLASSES = [0]      # 偵測類別（0 = person）

# =========================
# 連續幀驗證
# =========================
EMPTY_THRESHOLD = 30    # 連續 N 幀沒偵測到才算店內無人（30fps 約 1 秒）

# =========================
# 位置去重計數器
# =========================
SPATIAL_ENTRY_COOLDOWN = 5.0    # 同位置冷卻秒數
SPATIAL_ENTRY_RADIUS = 100.0    # 去重半徑（像素）

# =========================
# 軌跡歷史
# =========================
TRACK_HISTORY_MAX_LEN = 20      # 軌跡點最大數量

# =========================
# 錄影
# =========================
RECORDER_FPS = 30
RECORDER_SEGMENT_MINUTES = 3

# =========================
# 事件佇列
# =========================
EVENT_WORKER_MAX_QUEUE = 10

# =========================
# ROI 區域
# =========================
# # 1280 x 720
# # 門口多邊形區域
# ENTRY_ROI = np.array([
#     (1, 300),
#     (250, 340),
#     (510, 650),
#     (800, 670),
#     (1000, 720),
#     (1, 720),
# ], np.int32)

# ENTRY_ROI_PTS = ENTRY_ROI.reshape((-1, 1, 2))

# # 店內多邊形區域
# INSIDE_ROI = np.array([
#     (1, 299),
#     (1, 1),
#     (1280, 1),
#     (1280, 720),
#     (1001, 720),
#     (801, 669),
#     (511, 649),
#     (251, 339),
# ], np.int32)

# INSIDE_ROI_PTS = INSIDE_ROI.reshape((-1, 1, 2))

# 2304 x 1296
# 門口多邊形區域
ENTRY_ROI = np.array([
    (1, 600),
    (630, 700),
    (850, 1000),
    (1500, 1296),
    (1, 1296),
], np.int32)

ENTRY_ROI_PTS = ENTRY_ROI.reshape((-1, 1, 2))

# 店內多邊形區域
INSIDE_ROI = np.array([
    (1, 599),
    (1, 1),
    (2304, 1),
    (2304, 1296),
    (1499, 1296),
    (849, 999),
    (629, 699),
], np.int32)

INSIDE_ROI_PTS = INSIDE_ROI.reshape((-1, 1, 2))